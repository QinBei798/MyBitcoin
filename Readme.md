\# MyBitcoin (C++ Implementation)



MyBitcoin 是一个基于 C++ 开发的比特币原型系统，旨在通过代码实现深入理解区块链的核心机制。该项目涵盖了从底层密码学到高层并发挖矿的完整逻辑。



\## 🌟 核心特性



\- \*\*工作量证明 (PoW)\*\*：实现了基于哈希碰撞的挖矿算法，并支持每 5 个区块动态调整一次难度。

\- \*\*UTXO 模型\*\*：放弃简单的账户余额逻辑，采用未花费交易输出 (UTXO) 模型，提供原子性的状态更新与双花防御机制。

\- \*\*数字签名 (ECDSA)\*\*：利用 OpenSSL 的 `secp256k1` 曲线实现交易签名与验签，确保资金只能由私钥持有者花费。

\- \*\*智能找零与选币\*\*：钱包支持自动选择 UTXO 凑额、生成找零输出以及计算矿工手续费。

\- \*\*多线程并发控制\*\*：主程序采用多线程架构，允许用户在 CLI 交互的同时，让矿工在后台异步挖矿。

\- \*\*持久化存储\*\*：支持将区块链数据 (`blockchain.dat`) 和私钥 (`wallet.dat`) 以二进制或 PEM 格式持久化到磁盘。



\## 🏗️ 系统架构







\- \*\*Core\*\*: 包含区块 (`Block`)、交易 (`Transaction`)、区块链管理 (`Blockchain`) 及默克尔树 (`Merkle`)。

\- \*\*Crypto\*\*: 封装 SHA256、Hash256 (Double-SHA256) 和 Hash160。

\- \*\*Wallet\*\*: 负责密钥管理、地址生成 (Base58Check) 及交易构造。

\- \*\*Utils\*\*: 提供二进制序列化工具。



\## 🚀 快速开始



\### 依赖要求

\- \*\*编译器\*\*: 支持 C++17 的编译器 (如 MSVC 2022, GCC 9+)。

\- \*\*库\*\*: OpenSSL (必须包含 `applink.c` 以支持 Windows 环境)。

\- \*\*构建工具\*\*: CMake。



\### 编译与运行

1\. 配置 CMake 并链接 OpenSSL 库。

2\. 编译生成 `MyBitcoin.exe`。

3\. 运行程序，系统将自动加载或创建钱包。



\## 🎮 命令行交互 (CLI)



程序启动后，你可以通过以下指令控制节点：



| 命令 | 说明 |

| :--- | :--- |

| `start` | 启动后台自动挖矿线程 |

| `stop` | 停止后台挖矿 |

| `mine \[n]` | 手动同步挖掘 n 个区块 |

| `send <addr> <amt>` | 向指定地址发送 satoshi |

| `balance` | 查询当前钱包余额 |

| `address` | 查看本地钱包地址与公钥 |

| `chain` | 打印区块链完整状态 |

| `mempool` | 查看当前交易池中待处理的交易 |

| `exit` | 安全保存数据并退出程序 |

